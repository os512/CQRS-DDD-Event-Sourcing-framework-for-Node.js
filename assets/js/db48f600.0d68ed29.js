/*! For license information please see db48f600.0d68ed29.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5322],{2525:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,i){for(var a,c,s=o(e),u=1;u<arguments.length;u++){for(var p in a=Object(arguments[u]))n.call(a,p)&&(s[p]=a[p]);if(t){c=t(a);for(var l=0;l<c.length;l++)r.call(a,c[l])&&(s[c[l]]=a[c[l]])}}return s}},1535:(e,t,n)=>{"use strict";var r=n(2525),o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,c=o?Symbol.for("react.fragment"):60107,s=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,p=o?Symbol.for("react.provider"):60109,l=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.forward_ref"):60112,d=o?Symbol.for("react.suspense"):60113,y=o?Symbol.for("react.memo"):60115,m=o?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||h}function O(){}function j(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||h}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},O.prototype=k.prototype;var w=j.prototype=new O;w.constructor=j,r(w,k.prototype),w.isPureReactComponent=!0;var S={current:null},E=Object.prototype.hasOwnProperty,P={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,o={},a=null,c=null;if(null!=t)for(r in void 0!==t.ref&&(c=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!P.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var u=Array(s),p=0;p<s;p++)u[p]=arguments[p+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:i,type:e,key:a,ref:c,props:o,_owner:S.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var N=/\/+/g,R=[];function C(e,t,n,r){if(R.length){var o=R.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function _(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function T(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case a:c=!0}}if(c)return n(r,e,""===t?"."+M(e,0):t),1;if(c=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=t+M(o=e[s],s);c+=T(o,u,n,r)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)c+=T(o=o.value,u=t+M(o,s++),n,r);else if("object"===o)throw n=""+e,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return c}function D(e,t,n){return null==e?0:T(e,"",t,n)}function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function q(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?$(e,r,n,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function $(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(N,"$&/")+"/"),D(e,L,t=C(t,i,r,o)),_(t)}var I={current:null};function U(){var e=I.current;if(null===e)throw Error(v(321));return e}},7378:(e,t,n)=>{"use strict";n(1535)},3905:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>p,kt:()=>d});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),f=u(n),d=o,y=f["".concat(s,".").concat(d)]||f[d]||l[d]||i;return n?r.createElement(y,a(a({ref:t},p),{},{components:n})):r.createElement(y,a({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=f;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},4775:(e,t,n)=>{"use strict";n.r(t),n.d(t,{frontMatter:()=>a,contentTitle:()=>c,metadata:()=>s,toc:()=>u,default:()=>l});var r=n(2122),o=n(9756),i=(n(7378),n(3905)),a={id:"preparing-to-production",title:"Preparing to Production",description:"This document describes how to prepare a reSolve application for deployment to a production server environment."},c=void 0,s={unversionedId:"preparing-to-production",id:"preparing-to-production",isDocsHomePage:!1,title:"Preparing to Production",description:"This document describes how to prepare a reSolve application for deployment to a production server environment.",source:"@site/../docs/preparing-to-production.md",sourceDirName:".",slug:"/preparing-to-production",permalink:"/resolve/docs/preparing-to-production",version:"current",frontMatter:{id:"preparing-to-production",title:"Preparing to Production",description:"This document describes how to prepare a reSolve application for deployment to a production server environment."},sidebar:"docs",previous:{title:"Authentication and Authorization",permalink:"/resolve/docs/authentication-and-authorization"},next:{title:"Debugging",permalink:"/resolve/docs/debugging"}},u=[{value:"Configuration Options",id:"configuration-options",children:[]},{value:"Configuring Adapters",id:"configuring-adapters",children:[]},{value:"Using Environment Variables",id:"using-environment-variables",children:[]}],p={toc:u};function l(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"configuration-options"},"Configuration Options"),(0,i.kt)("p",null,"When you move your application to production, you need to perform all required configurations according to your production environment's specifics."),(0,i.kt)("p",null,"An application is built for production using the ",(0,i.kt)("strong",{parentName:"p"},"build")," script, and run in the production mode using the ",(0,i.kt)("strong",{parentName:"p"},"start")," script. By default, an application that runs in the production mode takes into account settings specifies in the ",(0,i.kt)("strong",{parentName:"p"},"prodConfig")," configuration object (the ",(0,i.kt)("strong",{parentName:"p"},"config.prod.js")," file). However, you can use other config structure as long as you properly register it in the ",(0,i.kt)("strong",{parentName:"p"},"run.js")," file."),(0,i.kt)("p",null,"An example ",(0,i.kt)("strong",{parentName:"p"},"config.prod.js")," file:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const prodConfig = {\n  port: 3000,\n  mode: 'production',\n  readModelConnectors: {\n    HackerNews: {\n      module: '@resolve-js/readmodel-lite',\n      options: {}\n    }\n  },\n  jwtCookie: {\n    name: 'jwt',\n    maxAge: 31536000000\n  }\n}\n\nexport default prodConfig\n")),(0,i.kt)("h2",{id:"configuring-adapters"},"Configuring Adapters"),(0,i.kt)("p",null,"Before you move your app into production, specify all required ",(0,i.kt)("a",{parentName:"p",href:"/resolve/docs/advanced-techniques#adapters"},"adapters")," in the production config."),(0,i.kt)("p",null,"Depending on your requirements, you may want to specify storage adapters for events, Read Model data and View Model snapshots."),(0,i.kt)("p",null,"The code below demonstrates how to set up a storage adapter on the example of an in-memory Read Model storage:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"readModelConnectors: {\n    HackerNews: {\n      module: '@resolve-js/readmodel-lite',\n      options: {}\n    }\n  },\n")),(0,i.kt)("p",null,"In addition to storage adapters, you can specify adapters that define how your application communicates with underlying APIs. For example, use the API handler adapters, to define how your application handles API requests.\nYou can also provide a bus adapter and subscribe adapter to define how your application sends events and subscribes to events."),(0,i.kt)("h2",{id:"using-environment-variables"},"Using Environment Variables"),(0,i.kt)("p",null,"Use the ",(0,i.kt)("strong",{parentName:"p"},"declareRuntimeEnv")," function from the ",(0,i.kt)("strong",{parentName:"p"},"@resolve-js/scripts")," library to bind a configuration setting value to an environment variable:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { declareRuntimeEnv } from '@resolve-js/scripts'\nexport default {\n  subscribeAdapter: {\n    module: '@resolve-js/subscribe-mqtt',\n    options: {},\n  },\n  readModelsConnectors: {\n    HackerNews: {\n      module: '@resolve-js/readmodel-postgresql-serverless',\n      options: {\n        dbClusterOrInstanceArn: declareRuntimeEnv(\n          'RESOLVE_READMODEL_POSTGRESQL_CLUSTER_ARN'\n        ),\n        awsSecretStoreArn: declareRuntimeEnv(\n          'RESOLVE_READMODEL_POSTGRESQL_SECRET_ARN'\n        ),\n        databaseName: declareRuntimeEnv(\n          'RESOLVE_READMODEL_POSTGRESQL_DATABASE_NAME'\n        ),\n        region: declareRuntimeEnv('AWS_REGION'),\n      },\n    },\n  },\n}\n")),(0,i.kt)("p",null,"This approach is useful when you need to assign settings that should not be included in application sources (e.g., authentication credentials or secret keys) or settings that should be defined by a server instance."))}l.isMDXComponent=!0}}]);